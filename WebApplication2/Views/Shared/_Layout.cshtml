@using WebApplication2.Helpers;
<!DOCTYPE html>
<html lang="@CultureHelper.GetCurrentNeutralCulture()" dir="@(CultureHelper.IsRighToLeft() ? "rtl" : "ltr")">

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>@ViewBag.Title</title>
    @Scripts.Render("~/bundles/modernizr")
    <meta name="description" content="Need help in your studies. We have the top tutors from around the globe to help you.">
    <meta name="author" content="Imran Jawaid">
    <meta property="og:title" content="Need help in your studies. We have the top tutors from around the globe to help you.">
    <meta property="og:site_name" content="MezoExperts">
    <meta property="og:url" content="https://www.MezoExperts.com">
    <meta property="og:description" content="Need help is solving a problem in assignment, understanding a concept, preparation of exam. Visit us and get help from our top tutors">
    <meta property="og:type" content="eLearning">
    <meta property="og:locale" content="en_US">
    <title>Mezo Experts</title>

    <style>
        .no-js #loader { display: none;  }
        .js #loader { display: block; position: absolute; left: 100px; top: 0; }
        .se-pre-con {
	        position: fixed;
	        left: 0px;
	        top: 0px;
	        width: 100%;
	        height: 100%;
	        z-index: 9999;
	        background: url(/Images/Preloader_2.gif) center no-repeat #fff;
        }
    </style>
    <link href="~/Theme/dropdownMultiple/semantic.min.css" rel="stylesheet" />
     @if (CultureHelper.IsRighToLeft())
     {
        <link href="~/Content/bootstrap-rtl.css" rel="stylesheet" />
     }
     else
     {
        <link href="~/Theme/css/bootstrap.min.css" rel="stylesheet" />
     }
    
    <!-- Custom CSS -->
    <link href="~/Theme/css/freelancer.css" rel="stylesheet" />
    <link href="/Theme/css/custom.css" rel="stylesheet" />
    <!-- Custom Fonts -->
    <link href="~/Theme/font-awesome/css/font-awesome.min.css" rel="stylesheet" />
    <link rel="stylesheet" href="/Content/bootstrap-datetimepicker.min.css" />


    <link href="~/Theme/rating/css/star-rating.css" rel="stylesheet" />
    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
        <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
        <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->


</head>

<body id="page-top" class="index">

    <div class="se-pre-con"></div>
    @Html.Partial("~/Views/Home/_Navbar.cshtml", new WebApplication2.Models.HomeViewModel())

    @RenderSection("featured", required: false)


    @RenderBody()

    @Html.Partial("~/Views/Home/_Footer.cshtml")

    <!-- Scroll to Top Button (Only visible on small and extra-small screen sizes) -->
    <div class="scroll-top page-scroll visible-xs visible-sm">
        <a class="btn btn-primary" href="#page-top">
            <i class="fa fa-chevron-up"></i>
        </a>
    </div>

    <!-- jQuery -->

    @Scripts.Render("~/bundles/jquery")
    @Scripts.Render("~/bundles/bootstrap" + (CultureHelper.IsRighToLeft() ? "-rtl" : ""))
    <script src="~/Scripts/jquery.signalR-2.2.0.min.js"></script>
    <!--Reference the autogenerated SignalR hub script. -->
    <script src="~/signalr/hubs"></script>

    @*@Scripts.Render("~/bundles/ratings")*@
    @RenderSection("scripts", required: false)

    <script src="~/Theme/rating/js/star-rating.min.js"></script>
    <!-- Bootstrap Core JavaScript -->
    @*<script type="text/javascript" src="~/Scripts/moment.min.js"></script>*@
    <script type="text/javascript" src="~/Scripts/bootstrap-datetimepicker.min.js"></script>
    <!-- Custom Theme JavaScript -->
    <script src="~/Theme/js/prettify.js"></script>
    <script src="~/Scripts/bootstrap-notify.min.js"></script>
    <script type="text/javascript">
       
        $(window).load(function () {
            // Animate loader off screen
            $(".se-pre-con").fadeOut("slow");
            $("body").fadeIn("slow");
        });

        $(document).ready(function () {
            $(function () {
                $('#datetimepicker1').datetimepicker({
                    keepOpen: false,
                    format: 'MM/DD/YYYY',

                });;
            });

            $('#datetimepicker1 input').click(function (event) {
                $('#datetimepicker1 ').data("DateTimePicker").show();
            });

        });
    </script>
    <script>
        $(function () {
            $(".dropdown").hover(
                function () { $(this).addClass('open') },
                function () { $(this).removeClass('open') }
            );
        });


        $(function () {
            $('a[href="#search"]').on('click', function (event) {

                event.preventDefault();
                $('#search').addClass('open');
                $('#search > form > input[type="search"]').focus();
            });

            $('#search, #search button.close').on('click keyup', function (event) {
                if (event.target == this || event.target.className == 'close' || event.keyCode == 27) {
                    $(this).removeClass('open');
                }
            });




        });



        $(function () {
            // Declare a proxy to reference the hub.
            var chats = $.connection.onlines;
            chats.client.addNewMessageToPage = function (message) {
            };

            $.connection.hub.start().done(function () {

            });

            var notification = $.connection.notifications;

            notification.client.recieverNotifier = function (message) {
                // Add the message to the page.
                var parseresult = message.split("^");
                var image =parseresult[0];
                var username = parseresult[1];
                var textmessage = parseresult[2];
                var counter = parseresult[3];
                
                $.ajax({
                    type: 'Post',
                    url: '@Url.AbsoluteAction("UpdateSession", "Home")',

                    success: function (response) {
                        //$('#chatroom').append(response);

                    },
                    error: function () {
                        alert('error');
                    }
                }); // End Ajax  

          

                $("#notification_count").text(counter);
                $("#notification_count").fadeIn("slow");
                var notificationtext = '<div data-notify="container" style="margin-bottom:0px" class="col-xs-12 col-sm-12 alert alert-minimalist" role="alert">' +
                        '<img data-notify="icon" class="img-circle pull-left" src="'+image+'">' +
                        '<span data-notify="title">' + username + '</span>' +
                        '<span data-notify="message" style=text-transform: none;">' + textmessage + '</span>' +
                    '</div>';

              
                $("#notificationsBody").prepend(notificationtext);

                //notifiy
                $.notify({
                    icon: image,
                    title: username,
                    message: textmessage
                }, {
                    placement: {
                        from: "bottom",
                        align: "left"
                    },
                    allow_dismiss: true,
                    mouse_over: 'pause',
                    type: 'minimalist',
                    delay: 5000,
                    icon_type: 'image',
                    template: '<div data-notify="container" class="col-xs-11 col-sm-3 alert alert-{0}" role="alert">' +
                        '<img data-notify="icon" class="img-circle pull-left">' +
                        '<span data-notify="title">{1}</span>' +
                        '<span data-notify="message">{2}</span>' +
                    '</div>'
                });

                //add in notifcation bar body.

            };


        });

        
       


    </script>
    <script type="text/javascript">
        $(document).ready(function()
        {
            if ($("#notification_count").text() == "0")
                $("#notification_count").fadeOut("slow");

        $("#notificationLink").click(function()
        {
                $("#notificationContainer").fadeToggle(300);
                $("#notification_count").fadeOut("slow");
                $.ajax({
                    type: 'Post',
                    url: '@Url.AbsoluteAction("ReadNotifications", "Home")',

                    success: function (response) {
                        //$('#chatroom').append(response);

                    },
                    error: function () {
                        alert('error');
                    }
                }); // End Ajax
                return false;
        });

        //Document Click hiding the popup
        $(document).click(function()
        {
        $("#notificationContainer").hide();
        });

        //Popup on click
        $("#notificationContainer").click(function()
        {
       
        });

        });
    </script>
</body>


</html>


